# SvelteKit - Configuración

Este documento contiene conocimiento sobre cómo configurar correctamente SvelteKit y evitar conflictos comunes.

## jsconfig.json

### Configuración Correcta

SvelteKit genera automáticamente un `tsconfig.json` en `.svelte-kit/tsconfig.json`. El `jsconfig.json` debe extender esta configuración.

**Configuración correcta**:
```json
{
  "extends": "./.svelte-kit/tsconfig.json",
  "compilerOptions": {
    "module": "esnext",
    "target": "esnext",
    "checkJs": true,
    "moduleResolution": "bundler",
    "allowJs": true,
    "noEmit": true,
    "types": ["@sveltejs/kit"]
  },
  "include": ["src/**/*.js", "src/**/*.svelte", "src/**/*.d.ts", ".svelte-kit/ambient.d.ts", ".svelte-kit/non-ambient.d.ts"],
  "exclude": ["node_modules", "build", "dist", "**/*.ts", "**/*.tsx"]
}
```

### ⚠️ NO Hacer Esto

**NUNCA agregar `baseUrl` o `paths` en `jsconfig.json`**:
```json
// ❌ INCORRECTO - Causa conflictos con SvelteKit
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "$tokens": ["src/lib/tokens/index.js"],
      "$lib/*": ["src/lib/*"]
    }
  }
}
```

### ¿Por Qué?

- SvelteKit genera automáticamente su propio `tsconfig.json` con la configuración de paths
- Si defines `baseUrl` o `paths` en `jsconfig.json`, entra en conflicto con la configuración generada
- Esto causa problemas con intellisense y puede generar advertencias en la consola

### Solución: Usar `kit.alias` en `svelte.config.js`

Los aliases deben definirse en `svelte.config.js` usando `kit.alias`:

```javascript
// svelte.config.js
const config = {
  kit: {
    alias: {
      $tokens: 'src/lib/tokens',
      $lib: 'src/lib',
    },
  },
};
```

SvelteKit maneja automáticamente estos aliases y los incluye en su configuración generada.

## Mensajes de Advertencia Comunes

### "You have specified a baseUrl and/or paths in your jsconfig.json"

**Causa**: Has definido `baseUrl` o `paths` en `jsconfig.json`

**Solución**: 
1. Remover `baseUrl` y `paths` de `jsconfig.json`
2. Mover los aliases a `svelte.config.js` usando `kit.alias`
3. Reiniciar el servidor de desarrollo

### "Your jsconfig.json should extend the configuration generated by SvelteKit"

**Causa**: El `jsconfig.json` no está extendiendo la configuración de SvelteKit

**Solución**: Agregar `"extends": "./.svelte-kit/tsconfig.json"` al inicio del `jsconfig.json`

## Configuración de Aliases

### Forma Correcta (en svelte.config.js)

```javascript
import adapter from '@sveltejs/adapter-vercel';
import { vitePreprocess } from '@sveltejs/vite-plugin-svelte';

const config = {
  preprocess: vitePreprocess(),
  kit: {
    adapter: adapter(),
    alias: {
      $tokens: 'src/lib/tokens',
      $lib: 'src/lib',
      // Agregar más aliases aquí según sea necesario
    },
  },
};

export default config;
```

### Uso en el Código

Una vez configurados en `svelte.config.js`, puedes usarlos directamente:

```javascript
// ✅ Correcto
import { colors } from '$tokens';
import Button from '$lib/components/atoms/Button/Button.svelte';
```

## Resumen

1. **jsconfig.json**: Solo extender la configuración de SvelteKit, NO definir `baseUrl` o `paths`
2. **Aliases**: Definirlos en `svelte.config.js` usando `kit.alias`
3. **SvelteKit maneja automáticamente**: Los aliases se incluyen en la configuración generada
4. **Si ves advertencias**: Revisar que no haya `baseUrl` o `paths` en `jsconfig.json`
